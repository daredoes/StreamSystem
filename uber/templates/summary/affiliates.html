{% extends "base-admin.html" %}
{% block title %}Affiliates{% endblock %}
{% block content %}

<style type="text/css">
    table {
        width: auto;
        text-align: center;
    }
    td {
        padding: 10px;
    }
</style>

<h2>Affiliates</h2>

<table>
<tr>
    <td>Affiliate</td>
    <td>Total</td>
    <td>Count</td>
    <td>Breakdown</td>
</tr>
{% for affiliate, totals in counts %}
    <tr>
        <td><b>{{ affiliate }}</b></td>
        <td><nobr><b>${{ totals.total }}</b></nobr></td>
        <td><nobr><b>{{ totals.tally }} attendee{{ totals.tally|pluralize }}</b></nobr></td>
        <td>
            <ul>
            {% for amount, count in totals.sorted %}
                <li>{{ count }} attendee{{ count|pluralize }} gave ${{ amount }}</li>
            {% endfor %}
            </ul>
        </td>
    </tr>
{% endfor %}
</table>

<h3>Quantities</h3>

{% for item, quantity in quantities %}
    <b>{{ quantity }}</b>: {{ item }} <br/>
{% endfor %}

{% endblock %}
